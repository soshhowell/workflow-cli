{
    "name": "simple_workflow_demo",
    "memory": {
        "variables": {
            "project_name": "workflow-cli",
            "author": "Workflow CLI Team",
            "environment": "development",
            "max_items": 5
        },
        "schema": {
            "type": "object",
            "properties": {
                "project_name": {"type": "string"},
                "author": {"type": "string"},
                "environment": {"type": "string", "enum": ["development", "staging", "production"]},
                "max_items": {"type": "integer", "minimum": 1, "maximum": 20}
            }
        }
    },
    "steps": [
        {
            "name": "show_current_directory",
            "command": "pwd",
            "memory_update": [{
                "regex": "^(.+?)\\s*$",
                "variable": "memory.current_dir"
            }]
        },
        {
            "name": "get_system_info",
            "command": "echo \"System: $(uname -s) $(uname -m)\"",
            "memory_update": [{
                "regex": "System: (\\S+) (\\S+)",
                "variable": "memory.system_info"
            }]
        },
        {
            "name": "list_files_with_limit",
            "command": "echo 'Listing {{memory.max_items}} files:' && ls -la | head -{{memory.max_items}}",
            "success": {
                "regex": "total"
            }
        },
        {
            "name": "check_date_time",
            "command": "date '+%Y-%m-%d %H:%M:%S'",
            "memory_update": [{
                "regex": "^(.+)$",
                "variable": "memory.current_time"
            }]
        },
        {
            "name": "simulate_json_response",
            "command": "echo '{\"status\": \"success\", \"message\": \"Demo completed\", \"items_processed\": 42}'",
            "success": {
                "json": "status"
            },
            "memory_update": [{
                "json": "items_processed",
                "variable": "memory.items_count"
            }]
        },
        {
            "name": "test_retry_with_success",
            "command": "echo 'Attempting operation...' && echo 'Operation successful!'",
            "max_retries": 2,
            "success": {
                "regex": "successful"
            }
        },
        {
            "name": "demonstrate_variable_substitution",
            "command": "echo 'Project: {{memory.project_name}} by {{memory.author}}' && echo 'Environment: {{memory.environment}}' && echo 'Working in: {{memory.current_dir}}' && echo 'System: {{memory.system_info}}' && echo 'Time: {{memory.current_time}}' && echo 'Processed: {{memory.items_count}} items'",
            "success": {
                "regex": "Project:"
            }
        },
        {
            "name": "final_summary",
            "command": "echo '=== Workflow Demo Complete ===' && echo 'This workflow demonstrated:' && echo '- Basic shell commands (pwd, ls, date, uname)' && echo '- Memory extraction with regex and JSON' && echo '- Variable substitution with double bracket syntax' && echo '- Success validation with regex and JSON paths' && echo '- Retry mechanisms' && echo '- All using only built-in shell commands!'"
        }
    ]
}